---
# Documentation: https://wowchemy.com/docs/managing-content/

title: "备份压缩"
linktitle: "备份压缩"
date: 2021-10-29T18:56:23+08:00
type: docs
summary: ""
weight: 60
---

<!--more-->

## tar 命令：打包和备份的归档工具

`tar` 命令可以为 **Linux** 的文件和目录创建档案。利用 `tar`，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。

`tar` 最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用 `tar` 命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。

**常用参数**

| 参数                 | 功能                                                         |
| -------------------- | ------------------------------------------------------------ |
| -A                   | 新增文件到以存在的备份文件                                   |
| -B                   | 设置区块大小                                                 |
| -c                   | 建立新的备份文件                                             |
| -C <目录>            | 切换工作目录，先进入指定目录再执行压缩/解压缩操作，可用于仅压缩特定目录里的内容或解压缩到特定目录 |
| -d                   | 记录文件的差别                                               |
| -x                   | 从归档文件中提取文件                                         |
| -t                   | 列出备份文件的内容                                           |
| -z                   | 通过`gzip`指令压缩/解压缩文件，文件名最好为`*.tar.gz`        |
| -Z                   | 通过compress指令处理备份文件                                 |
| -f <备份文件>        | 指定备份文件                                                 |
| -v                   | 显示指令执行过程                                             |
| -r                   | 添加文件到已经压缩的文件                                     |
| -u                   | 添加改变了和现有的文件到已经存在的压缩文件                   |
| -j                   | 通过`bzip2`指令压缩/解压缩文件，文件名最好为`*.tar.bz2`      |
| -v                   | 显示操作过程                                                 |
| -l                   | 文件系统边界设置                                             |
| -k                   | 保留原有文件不覆盖                                           |
| -m                   | 保留文件不被覆盖                                             |
| -w                   | 确认压缩文件的正确性                                         |
| -p                   | 保留原来的文件权限与属性                                     |
| -P                   | 使用文件名的绝对路径，不移除文件名称前的“/”号                |
| -N <日期格式>        | 只将较指定日期更新的文件保存到备份文件里                     |
| --exclude=<范本样式> | 排除符合范本样式的文件                                       |
| --remove-files       | 归档/压缩之后删除源文件                                      |

**参考实例**

```bash
tar -cf all.tar *.jpg                               # 将所有 .jpg 的文件打成一个名为 all.tar 的包
tar -cvf linuxcool.tar linuxcool --remove-files     # 打包文件之后删除源文件
tar -zcvf log.tar.gz linuxcool.log                  # 打包文件以后，以 gzip 压缩
tar -xzvf package.tar.gz                            # 解压 tar.gz 包
tar -xzJf package.tar.xz                            # 解压 tar.xz 包
```