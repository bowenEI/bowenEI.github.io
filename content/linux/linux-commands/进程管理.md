---
# Documentation: https://wowchemy.com/docs/managing-content/

title: "进程管理"
linktitle: "进程管理"
date: 2021-10-29T19:02:25+08:00
type: docs
summary: ""
weight: 90
---

<!--more-->

## ps 命令：显示进程状态

`ps` 命令是 process status 的缩写，`ps` 命令用于显示当前系统的进程状态。可以搭配 `kill` 指令随时中断、删除不必要的程序。

`ps` 命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。  

**常用参数**

| 参数                   | 功能                                                         |
| ---------------------- | ------------------------------------------------------------ |
| -a                     | 显示所有终端机下执行的程序，除了阶段作业领导者之外           |
| a                      | 显示现行终端机下的所有程序，包括其他用户的程序               |
| -A                     | 显示所有程序                                                 |
| -c                     | 显示CLS和PRI栏位                                             |
| c                      | 列出程序时，显示每个程序真正的指令名称，而不包含路径，选项或常驻服务的标示 |
| -C <指令名称>          | 指定执行指令的名称，并列出该指令的程序的状况                 |
| -d                     | 显示所有程序，但不包括阶段作业领导者的程序                   |
| -e                     | 此选项的效果和指定”A”选项相同                                |
| e                      | 列出程序时，显示每个程序所使用的环境变量                     |
| -f                     | 显示UID,PPIP,C与STIME栏位                                    |
| f                      | 用ASCII字符显示树状结构，表达程序间的相互关系                |
| -g <群组名称>          | 此选项的效果和指定”-G”选项相同，当亦能使用阶段作业领导者的名称来指定 |
| g                      | 显示现行终端机下的所有程序，包括群组领导者的程序             |
| -G <群组识别码>        | 列出属于该群组的程序的状况，也可使用群组名称来指定           |
| h                      | 不显示标题列                                                 |
| -H                     | 显示树状结构，表示程序间的相互关系                           |
| -j或j                  | 采用工作控制的格式显示程序状况                               |
| -l或l                  | 采用详细的格式来显示程序状况                                 |
| L                      | 列出栏位的相关信息                                           |
| -m或m                  | 显示所有的执行绪                                             |
| n                      | 以数字来表示USER和WCHAN栏位                                  |
| -N                     | 显示所有的程序，除了执行ps指令终端机下的程序之外             |
| -p <程序识别码>        | 指定程序识别码，并列出该程序的状况                           |
| p <程序识别码>         | 此选项的效果和指定”-p”选项相同，只在列表格式方面稍有差异     |
| r                      | 只列出现行终端机正在执行中的程序                             |
| -s <阶段作业>          | 指定阶段作业的程序识别码，并列出隶属该阶段作业的程序的状况   |
| s                      | 采用程序信号的格式显示程序状况                               |
| S                      | 列出程序时，包括已中断的子程序资料                           |
| -t <终端机编号>        | 指定终端机编号，并列出属于该终端机的程序的状况               |
| t <终端机编号>         | 此选项的效果和指定”-t”选项相同，只在列表格式方面稍有差异     |
| -T                     | 显示现行终端机下的所有程序                                   |
| -u <用户识别码>        | 此选项的效果和指定”-U”选项相同                               |
| u                      | 以用户为主的格式来显示程序状况                               |
| -U <用户识别码>        | 列出属于该用户的程序的状况，也可使用用户名称来指定           |
| U <用户名称>           | 列出属于该用户的程序的状况                                   |
| v                      | 采用虚拟内存的格式显示程序状况                               |
| -V或V                  | 显示版本信息                                                 |
| -w或w                  | 采用宽阔的格式来显示程序状况                                 |
| x                      | 显示所有程序，不以终端机来区分                               |
| X                      | 采用旧式的Linux i386登陆格式显示程序状况                     |
| -y                     | 配合选项”-l”使用时，不显示F(flag)栏位，并以RSS栏位取代ADDR栏位 |
| -- <程序识别码>        | 此选项的效果和指定”p”选项相同                                |
| --cols <每列字符数>    | 设置每列的最大字符数                                         |
| --columns <每列字符数> | 此选项的效果和指定”--cols”选项相同                           |
| --cumulative           | 此选项的效果和指定”S”选项相同                                |
| --deselect             | 此选项的效果和指定”-N”选项相同                               |
| --forest               | 此选项的效果和指定”f”选项相同                                |
| --headers              | 重复显示标题列                                               |
| --help                 | 在线帮助                                                     |
| --info                 | 显示排错信息                                                 |
| --lines <显示列数>     | 设置显示画面的列数                                           |
| --no-headers           | 此选项的效果和指定”h”选项相同，只在列表格式方面稍有差异      |
| --group <群组名称>     | 此选项的效果和指定”-G”选项相同                               |
| --Group <群组识别码>   | 此选项的效果和指定”-G”选项相同                               |
| --pid <程序识别码>     | 此选项的效果和指定”-p”选项相同                               |
| --rows <显示列数>      | 此选项的效果和指定”--lines”选项相同                          |
| --sid <阶段作业>       | 此选项的效果和指定”-s”选项相同                               |
| -tty <终端机编号>      | 此选项的效果和指定”-t”选项相同                               |
| --user <用户名称>      | 此选项的效果和指定”-U”选项相同                               |
| --User <用户识别码>    | 此选项的效果和指定”-U”选项相同                               |
| --version              | 此选项的效果和指定”-V”选项相同                               |
| --widty <每列字符数>   | 此选项的效果和指定”-cols”选项相同                            |

**参考实例**

```bash
ps -aux                 # 把所有进程显示出来
ps -A                   # 把所有进程显示出来
ps -aux > ps.txt        # 把所有进程显示出来，并输出到ps.txt文件
ps -ef | grep ssh       # 查找特定进程信息
ps -u root              # 显示指定用户信息
ps -aux | sort -nk 3    # 按 CPU 资源的使用量对进程进行排序
ps -aux | sort -rnk 4   # 按内存资源的使用量对进程进行排序
```

## kill 命令：杀死进程

`kill` 正如这个单词的意思一样，就是杀死。**Linux** 系统中 `kill` 命令用来删除执行中的程序或工作。

`kill` 命令可将指定的信号发送给相应的进程或工作。`kill` 命令默认使用信号为 15，用于结束进程或工作。如果进程或工作忽略此信号，则可以使用信号 9，强制杀死进程或作业。

**常用参数**

| 参数 | 功能                                                 |
| ---- | ---------------------------------------------------- |
| -l   | 列出系统支持的信号                                   |
| -s   | 指定向进程发送的信号                                 |
| -a   | 处理当前进程时不限制命令名和进程号的对应关系         |
| -p   | 指定kill命令只打印相关进程的进程号，而不发送任何信号 |

**参考实例**

```bash
kill -l         # 列出系统支持的信号列表
kill -9 1951    # 强制杀死进程 PID 为 1951 的进程
```

**常用的信号量**

| 信号 | 编号 | 说明                            |
| ---- | ---- | ------------------------------- |
| HUP  | 1    | 终端断线                        |
| INT  | 2    | 中断（同`Ctrl+C`）              |
| QUIT | 3    | 退出（同`Ctrl+\`）              |
| KILL | 9    | 强制终止                        |
| TERM | 15   | 终止                            |
| CONT | 18   | 继续（与STOP相反，`fg/bg`命令） |
| STOP | 19   | 暂停（同`Ctrl+Z`）              |

## killall 命令：使用进程名称来杀死一组进程

`killall` 命令使用进程的名称来杀死进程，使用此指令可以杀死一组同名进程。我们可以使用 `kill` 命令杀死指定进程 PID 的进程，如果要找到我们需要杀死的进程，我们还需要在之前使用 `ps` 等命令再配合 `grep` 来查找进程，而 `killall` 把这两个过程合二为一，是一个很好用的命令。

**常用参数**：

| 参数 | 功能                                   |
| ---- | -------------------------------------- |
| -e   | 对长名称进行精确匹配                   |
| -l   | 打印所有已知信号列表                   |
| -p   | 杀死进程所属的进程组                   |
| -i   | 交互式杀死进程，杀死进程前需要进行确认 |
| -r   | 使用正规表达式匹配要杀死的进程名称     |
| -s   | 用指定的进程号代替默认信号“SIGTERM”    |
| -u   | 杀死指定用户的进程                     |

**参考实例**

```bash
killall -9 httpd        # 杀死 httpd 所有进程
killall -l              # 使用 -l 参数打印所有已知信号列表
```